---
title: 需要全部请求的分页数据优化
author: 独孤流
date: 2024-07-25 01:04:00 +0800
categories: [other, 其他]
tags: [other]     # TAG names should always be lowercase
---

> ### 问题
> 由于做的是一个富客服端APP，需要在APP第一次启动时同步大量的服务器，之前是做串行的请求，也就是一页请求完成后再请求下一页，直到请求结束为止，如果数据过多，比如`3万`条数据，一页请求`200`条,网络正常请求下一页请求耗时`300`毫秒
请求时间：全部请求完需要`30000/200*0.3=45秒`，在这个过程中如果操作就会出数据丢失或操作卡顿等情况

### 解决方案
1、服务端和APP一起优化，服务端优化每页请求的数量可以支持比如`1000`条
2、APP优化并行请求，一次性最多请求`5`页
请求时间：全部请求完需要`30000/(1000*5)*0.3=1.8秒`，在这个过程中如果操作就会出数据丢失或操作卡顿等情况

问题：
1、需要控制并发的数量
2、需要控制网络请求的优先顺序
3、防止无限请求