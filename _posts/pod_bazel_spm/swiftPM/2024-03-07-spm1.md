---
title: Swift Package Manage使用及自定义
author: 独孤流
date: 2024-03-07 01:04:00 +0800
categories: [Pod_bazel_spm, SPM]
tags: [SPM, SwiftPM]     # TAG names should always be lowercase
---

参考：
- [Swift Package Manager 使用](https://juejin.cn/post/6871489791213436941)

> ### 前言
> 最近在接入亚马逊人脸识别时，亚马逊提供的最新SDK是使用`Swift Package Manage`管理的，而项目里使用的其他三方SDK是使用`cocoa pods`进行管理，一开始以为两个不能兼容，但是经过实际测试，是可以正常一起使用

### 普通项目或Pod项目中引入`Swift Package Manager`管理的项目

以接入`amplify-swift`
git地址：`https://github.com/aws-amplify/amplify-swift`

以接入`amplify-ui-swift-liveness`
git地址：`https://github.com/aws-amplify/amplify-ui-swift-liveness`

![image](/assets/img/pod/spm1-01.png)
![image](/assets/img/pod/spm1-02.png)
![image](/assets/img/pod/spm1-03.png)
![image](/assets/img/pod/spm1-04.png)

----
### `UIKit`里引入`SwiftUI`框架
> 由于引入的`AmplifyUILiveness`是使用的`SwiftUI`，我们的主题项目使用的是标准UIKit，所以需要再普通页面引入需要进行包装一成

参考：
- [SwiftUI 与 UIKit 混合开发](https://coderjtao.github.io/2020/08/30/SwiftUI-%E4%B8%8E-UIKit-%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/)
使用`UIHostingController`进行包装
```
import UIKit
import SwiftUI
class ViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        let btn = UIButton(frame: CGRect(x: 100, y: 100, width: 60, height: 40))
        btn.setTitle("showTest", for: .normal)
        btn.setTitleColor(.black, for: .normal)
        btn.addTarget(self, action: #selector(showMyTestSwiftUI), for: .touchUpInside)
        self.view.addSubview(btn)
    }
    
    @objc func showMyTestSwiftUI() {
        let vc = UIHostingController(rootView: Text("Text"))
        self.navigationController?.pushViewController(vc, animated: true)
    }
}
```
----
### 自定义`Swift Package Manager`管理的项目
> 由于我们的主项目需要支持到`iOS12`，但`SwiftUI`最低需要`iOS14`,所以需要把`AmplifyUILiveness`下载好源码改成普通UIKit的框架